# Setup for Jenkins using Docker

Jenkins is created in Docker using this configuration file ``Dockerfile-Jenkins-Maven``{{open}}

**1. Show password of Jenkins setup**

``docker exec jenkinsfordevops cat /var/jenkins_home/secrets/initialAdminPassword``{{execute}}

**2. Setup Jenkins for the first time**

Enter password obtained in the previous screen for the first time
![First Time Password](/root/projects/online-account/trainingassets/images/JenkinsFirstTimeScreen.png)

Install Suggested Plugins
![Suggested Plugins](/root/projects/online-account/trainingassets/images/InstallPlugins.png)

**3. Setup Jenkins pipeline**
 * Login to Jenkins application https://[[HOST_SUBDOMAIN]]-9080-[[KATACODA_HOST]].environments.katacoda.com/
 * Use password found in the previous point(#3) to login for the first time
 * Register user for first time
 * Create New Job
 * Create "Pipeline Project"
 * Pipeline --> Definition = "Pipeline script from SCM" --> SCM = "Git" --> Repository URL --> Online-Account App URL (https://github.com/ravikalla/online-account.git) --> OK
 * Create new folders "Digital" & "Consumer"

**4. Build application**
 * Click "Build Now" button in Jenkins pipeline"
 * Login to Bank application with credentials "Admin/password" - https://[[HOST_SUBDOMAIN]]-8800-[[KATACODA_HOST]].environments.katacoda.com/

**5. Check code quality**
 * Login to Sonar with credentials "admin/admin" - https://[[HOST_SUBDOMAIN]]-9000-[[KATACODA_HOST]].environments.katacoda.com/
 * Check if the application "online-account" is available in Sonar

**6. Check DevOps Ticket Creation SwaggerUI**
Defect Creation Swagger URL - https://[[HOST_SUBDOMAIN]]-8055-[[KATACODA_HOST]].environments.katacoda.com/swagger-ui.html

**7. Check the DevOps Tickets**
GitHub URL for DevOps Tickets - https://github.com/ravikalla/test/issues

**8. Download Job**
``curl -X GET https://[[HOST_SUBDOMAIN]]-8055-[[KATACODA_HOST]].environments.katacoda.com/job/JavaTemplate/config.xml -u admin:admin -o mylocalconfig.xml``{{execute}}

**9. Create New Job for Java**

Import Jenkins Crumb for Security:
``CRUMB=$(curl -s 'https://2886795344-9080-elsy05.environments.katacoda.com/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,":",//crumb)' -u admin:admin)``{{execute}}

Create "ConsumerJavaProject1" in "Consumer" folder
``curl -s -XPOST 'https://[[HOST_SUBDOMAIN]]-8055-[[KATACODA_HOST]].environments.katacoda.com/job/Consumer/createItem?name=ConsumerJavaProject1' -u admin:admin --data-binary @mylocalconfig.xml -H "$CRUMB" -H "Content-Type:text/xml"``{{execute}}

Create "DigitalJavaProject1" in "Digital" folder
``curl -s -XPOST 'https://[[HOST_SUBDOMAIN]]-8055-[[KATACODA_HOST]].environments.katacoda.com/job/Digital/createItem?name=DigitalJavaProject1' -u admin:admin --data-binary @mylocalconfig.xml -H "$CRUMB" -H "Content-Type:text/xml"``{{execute}}

## Congratulations

You have now successfully executed the first step in this scenario
